# Changelog

See the [releases for Scribe-Data](https://github.com/scribe-org/Scribe-Data/releases) for an up to date list of versions and their release dates.

Scribe-Data tries to follow [semantic versioning](https://semver.org/), a MAJOR.MINOR.PATCH version where increments are made of the:

- MAJOR version when we make incompatible API changes
- MINOR version when we add functionality in a backwards compatible manner
- PATCH version when we make backwards compatible bug fixes

Emojis for the following are chosen based on [gitmoji](https://gitmoji.dev/).

## [Upcoming] Scribe-Data 5.x

## Scribe-Data 5.0.0

### ‚ú® Features

- Scribe-Data now has the ability to download the most recent or a specific Wikidata lexemes dump ([#517](https://github.com/scribe-org/Scribe-Data/issues/517)).
  - The user is prompted to download a dump for calls for all data ([#518](https://github.com/scribe-org/Scribe-Data/issues/518)).
  - Scribe-Data must now use a lexeme dump to download all Wikidata lexeme data ([#519](https://github.com/scribe-org/Scribe-Data/issues/519)).
  - The total command can be ran against a Wikidata lexeme dump ([#520](https://github.com/scribe-org/Scribe-Data/issues/520), [#524](https://github.com/scribe-org/Scribe-Data/issues/524)).
  - Translations can be parsed from Wikidata dumps ([#525](https://github.com/scribe-org/Scribe-Data/issues/525)).
- Wikidata SPARQL queries are now autogenerated and maintained via Wikidata dumps ([#513](https://github.com/scribe-org/Scribe-Data/issues/513)).
  - Forms are separated into files based on their identifiers while ignoring maintainer set queries ([#575](https://github.com/scribe-org/Scribe-Data/issues/575)).
  - Queries have been expanded for all languages and data forms based on the Wikidata dump process.
- The date of last modification for Wikidata lexemes has been added to query and dump parsing outputs ([#562](https://github.com/scribe-org/Scribe-Data/issues/562)).
- Interactive mode now functions throughout the CLI functionality where the user is presented with options for data extraction.
- The is now a top level interactive mode command for accessing all Scribe-Data functionality ([#523](https://github.com/scribe-org/Scribe-Data/issues/523)).
- Repeat forms are combined with vertical bars (`"|"`) as a separator ([#544](https://github.com/scribe-org/Scribe-Data/issues/544), [#573](https://github.com/scribe-org/Scribe-Data/issues/573)).
- A workflow has been created to update the emoji data on a regular basis ([#542](https://github.com/scribe-org/Scribe-Data/issues/542)).
- Resulting data can be filtered based on data contracts ([#581](https://github.com/scribe-org/Scribe-Data/issues/581)).
  - Contracts can be checked against data to assure that they're valid given the data's field names ([#561](https://github.com/scribe-org/Scribe-Data/issues/561)).
- The Wikipedia based autosuggestion functionality is now CLI based instead of using a Jupyter notebook ([#206](https://github.com/scribe-org/Scribe-Data/issues/206)).

### ‚öñÔ∏è Legal

- SPDX license identifiers have been added for all files ([#553](https://github.com/scribe-org/Scribe-Data/issues/553)).

### üêû Bug Fixes

- The version command was fixed to account for cases where the version has a `v` before it ([#534](https://github.com/scribe-org/Scribe-Data/issues/534)).
- The functionality to check for current data and prompt its deletion was centralized and messages to the user were made more clear ([#336](https://github.com/scribe-org/Scribe-Data/issues/336)).
- If Wikidata queries can't be completed, Scribe-Data now includes dramatically better error messages and directs the user to leverage commands that use Wikidata dumps ([#549](https://github.com/scribe-org/Scribe-Data/issues/549)).
- General bug fixes for a more fluid developer experience.

### ‚úÖ Tests

- Tests have been written for all new functionalities ([#570](https://github.com/scribe-org/Scribe-Data/issues/570)).
- CI testing now includes a coverage check that breaks if coverage falls below a given percentage.

### üìù Documentation

- Documentation has been expanded for all functionalities of the CLI.

### ‚ôªÔ∏è Code Refactoring

- All numpydoc docstrings have been fixed and unneeded code has been removed ([#547](https://github.com/scribe-org/Scribe-Data/issues/547)).

## Scribe-Data 4.1.0

### ‚ú® Features

- Queries for noun genders and other properties that require the Wikidata label service now return their English label rather than auto label that was returning just the Wikidata QID.
- SPARQL queries for English and Portuguese prepositions were added to allow the CLI to query these types of data.
- The convert functionality once again works for lists of languages all data types for them.

### üêû Bug Fixes

- SQLite conversion was fixed for all queries ([#527](https://github.com/scribe-org/Scribe-Data/issues/527)).
- The data conversion process outputs were improved including capitalizing language names and repeat notices to the user were removed.
- The CLI's `get` command now returns all data types if none is passed.
- The Portuguese verbs query was fixed as it wasn't formatted correctly.
- The emoji keyword functionality was fixed given the new lexeme ID based form of the data.
  - Arguments were fixed that were breaking the functionality.
  - Languages for the user were capitalized.
- `case` has been renamed `grammaticalCase` in preposition queries to assure that SQLite reserved keywords are not used.

## Scribe-Data 4.0.0

### ‚ú® Features

- Queries for countless data types for countless languages were expanded and added ‚ù§Ô∏è
- Scribe-Data is now a fully functional CLI.
  - Querying Wikidata lexicographical data can be done via the `get` command ([#159](https://github.com/scribe-org/Scribe-Data/issues/159)).
  - The output type of queries can be in JSON, CSV, TSV and SQLite, with converting output types also being possible ([#145](https://github.com/scribe-org/Scribe-Data/issues/145), [#146](https://github.com/scribe-org/Scribe-Data/issues/146))
  - Output paths can be set for query results ([#144](https://github.com/scribe-org/Scribe-Data/issues/144)).
  - The version of the CLI can be printed to the command line and the CLI can further be used to upgrade itself ([#186](https://github.com/scribe-org/Scribe-Data/issues/186), [#157 ](https://github.com/scribe-org/Scribe-Data/issues/157)).
  - Total Wikidata lexemes for languages and data types can be derived with the `total` command ([#147](https://github.com/scribe-org/Scribe-Data/issues/147)).
  - Interactive and total commands can be used via an interactive mode with the `--interactive` argument ([#158](https://github.com/scribe-org/Scribe-Data/issues/158), [#203](https://github.com/scribe-org/Scribe-Data/issues/203)).
  - Outputs were standardized to assure that the CLI experience is consistent
- The machine translation process has been removed to make way for the Wiktionary based implementation ([#292](https://github.com/scribe-org/Scribe-Data/issues/292)).
- Package metadata files were standardized for languages, data types and Wikidata lexeme forms.
- CLI commands have an argument check that can suggest correct languages and data types ([#341](https://github.com/scribe-org/Scribe-Data/issues/341)).

### üêû Bug Fixes

- Wikidata query process stages no longer trigger the tqdm progress bar when they're unsuccessful ([#155](https://github.com/scribe-org/Scribe-Data/issues/155)).

### ‚úÖ Tests

- Tests have been written for the CLI to assure that it's functionality remains consistent.
- Workflows were created to assure that the Wikidata queries and project structure are consistent to assure package functionality ([#339](https://github.com/scribe-org/Scribe-Data/issues/339), [#357](https://github.com/scribe-org/Scribe-Data/issues/357))
  - Project queries and its structure have been updated to match the rules developed for the checks.

### üìù Documentation

- The CLI's functionality has been fully documented ([#152](https://github.com/scribe-org/Scribe-Data/issues/152), [#208](https://github.com/scribe-org/Scribe-Data/issues/208)).
- Documentation was created to show how to write Scribe-Data queries ([#395](https://github.com/scribe-org/Scribe-Data/issues/395)).

### ‚ôªÔ∏è Code Refactoring

- `word_type` has been switched to `data_type` throughout the codebase ([#160](https://github.com/scribe-org/Scribe-Data/issues/160)).
- Case, gender and annotation utility functions were removed as the formatting process that used them has changed.
- The SPARQLWrapper access method has been extracted to the Wikidata utils and is imported into the files that need it ([#164](https://github.com/scribe-org/Scribe-Data/issues/164)).
- Export data paths have been converted to centrally saved variables to reduce hard coded string repetition.
- Many files were renamed including `update_data.py` being renamed `query_data.py`
- Paths within the package have been updated to work for all operating systems via `pathlib` ([#125](https://github.com/scribe-org/Scribe-Data/issues/125)).
- The language formatting scripts have been dramatically simplified given changes to export paths all being the same.
- The `update_files` directory was removed in preparation of other means of showing data totals.
- The `language_data_extraction` directory was moved under the Wikidata directory as it's only used for those processes now ([#446](https://github.com/scribe-org/Scribe-Data/issues/446)).
- The emoji keyword process was centralized to simplify project maintenance ([#359](https://github.com/scribe-org/Scribe-Data/issues/359)).
- PyICU was removed as a dependency and a process was made to install it and its needed dependencies given the operating system of the user ([#196](https://github.com/scribe-org/Scribe-Data/issues/196)).
- The data formatting step was centralized such that we only have one for all languages ([#142](https://github.com/scribe-org/Scribe-Data/issues/142)).
- Sub-query processes are now no longer hard coded such that we'd need to maintain the total possible sub-queries within the `query_data.py` process.

## Scribe-Data 3.3.0

### ‚ú® Features

- The translation process has been updated to allow for translations from non-English languages ([#72](https://github.com/scribe-org/Scribe-Data/issues/72), [#73](https://github.com/scribe-org/Scribe-Data/issues/73), [#74](https://github.com/scribe-org/Scribe-Data/issues/74), [#75](https://github.com/scribe-org/Scribe-Data/issues/75), [#75](https://github.com/scribe-org/Scribe-Data/issues/75), [#76](https://github.com/scribe-org/Scribe-Data/issues/76), [#77](https://github.com/scribe-org/Scribe-Data/issues/77), [#78](https://github.com/scribe-org/Scribe-Data/issues/78), [#79](https://github.com/scribe-org/Scribe-Data/issues/79)).

### üêû Bug Fixes

- Annotation bugs were removed like repeat or empty values.
- Perfect tenses of Portuguese verbs were fixed via finding the appropriate PID ([#68](https://github.com/scribe-org/Scribe-Data/issues/68)).
  - Note that the most common past perfect property is not the standard one, so this will need to be fixed.

### üìù Documentation

- The documentation has been given a new layout with the logo in the top left ([#90](https://github.com/scribe-org/Scribe-Data/issues/90)).
- The documentation now has links to the code at the top of each page ([#91](https://github.com/scribe-org/Scribe-Data/issues/91)).

### ‚ôªÔ∏è Code Refactoring

- [pre-commit](https://pre-commit.com/) have been added to the repo to improve the development experience ([#137](https://github.com/scribe-org/Scribe-Data/issues/137)).
- Code formatting was shifted from [black](https://github.com/psf/black) to [Ruff](https://github.com/astral-sh/ruff).
- A Ruff based GitHub workflow was added to check the code formatting and lint the codebase on each pull request ([#109](https://github.com/scribe-org/Scribe-Data/issues/109)).
- The `_update_files` directory was renamed `update_files` as these files are used in non-internal manners now ([#57](https://github.com/scribe-org/Scribe-Data/issues/57)).
- A common function has been created to map Wikidata ids to noun genders ([#69](https://github.com/scribe-org/Scribe-Data/issues/69)).
- The project now is installed locally for development and command line usage, so usages of `sys.path` have been removed from files ([#122](https://github.com/scribe-org/Scribe-Data/issues/122)).
- The directory structure has been dramatically streamlined and includes folders for future projects where language data could come from other sources like Wiktionary ([#139](https://github.com/scribe-org/Scribe-Data/issues/139)).
  - Translation files are moved to their own directory.
  - The `extract_transform` directory has been removed and all files within it have been moved one level up.
  - The `languages` directory has been renamed `language_data_extraction`.
  - All files within `wikidata/_resources` have been moved to the `resources` directory.
  - The gender and case annotations for data formatting have now been commonly defined.
  - All language directory `formatted_data` files have been now moved to the `scribe_data_json_export` directory to prepare for outputs being required to be directed to a directory outside of the package.
  - Path computing has been refactored throughout the codebase, and unneeded functions for data transfers have been removed.

## Scribe-Data 3.2.2

- Minor fixes to documentation index and file docstrings to fix errors.
- Revert change to package path definition to hopefully register the resources directory.

## Scribe-Data 3.2.1

### ‚ôªÔ∏è Code Refactoring

- The docs and tests were grafted into the package using `MANIFEST.in`.
- Minor fixes to file and function docstrings and documentation files.
- `include_package_data=True` is used in `setup.py` to hopefully include all files in the package distribution.

## Scribe-Data 3.2.0

### ‚ú® Features

- The data and process needed for an English keyboard has been added ([#39](https://github.com/scribe-org/Scribe-Data/issues/39)).
  - The Wikidata queries for English have been updated to get all nouns and verbs.
  - Formatting scripts have been written to prepare the queried data and load it into an SQLite database.
- The data update process has been cleaned up in preparation for future changes to Scribe-Data and to implement better practices.
- Language data was extracted into a JSON file for more succinct referencing ([#52](https://github.com/scribe-org/Scribe-Data/issues/52)).
- Language codes are now checked with the package [langcodes](https://github.com/rspeer/langcodes) for easier expansion.
- A process has been created to check and update words that can be translated for each Scribe language ([#44](https://github.com/scribe-org/Scribe-Data/issues/44)).
- The baseline data returned from Wikidata queries is now removed once a formatted data file is created.

### üêû Bug Fixes

- Tensorflow was removed from the download wiki process to fix build problems on Macs.

### ‚úÖ Tests

- A full testing suite has been added to run on GitHub Actions ([#37](https://github.com/scribe-org/Scribe-Data/issues/37)).
- Unit tests have been added for Wikidata queries ([#48](https://github.com/scribe-org/Scribe-Data/issues/48)) and utility functions ([#50](https://github.com/scribe-org/Scribe-Data/issues/50)).

### ‚ôªÔ∏è Code Refactoring

- The Anaconda based virtual environment was removed and documentation was updated to reflect this.
- Language data processes were moved into the `src/scribe_data/extract_transform/languages` directory to clean up the structure.
- Code formatting processes were defined with common structures based on language and word type variables defined at the top of files.

## Scribe-Data 3.1.0

### ‚ú® Features

- The word "Scribe" is now added to language database nouns files if it's not already present ([#35](https://github.com/scribe-org/Scribe-Data/issues/35)).
- German contracted prepositions have been added to the German prepositions formatting process ([#34](https://github.com/scribe-org/Scribe-Data/issues/34)).
- Words that are upper case are now better included in the autocomplete lexicon with their lower case equivalents being removed.
- Words with apostrophes have been removed from the autocomplete lexicon.

### ‚ôªÔ∏è Code Refactoring

- Database output column names are now zero indexed to better align with Python and other language standards.

## Scribe-Data 3.0.0

### ‚ú® Features

- Scribe-Data now has the ability to generate SQLite databases from formatted language data.
  - `data_to_sqlite.py` is used to read available JSON files and input their information into the databases.
- These databases are now sent to Scribe apps via defined paths.
  - `send_dbs_to_scribe.py` finds all available language databases and copies them.
  - Separating this step from the data update is in preparation for data import in the future where this will be an individual step.
- Scribe-Data now also creates autocomplete lexicons for each language within `data_to_sqlite.py`.
- JSON data is no longer able to be uploaded to Scribe app directories directly, with the SQLite directories now being exported instead.
- Emojis of singular nouns are now also linked to their plural counterparts if the plural isn't present in the emoji keyword outputs.
- The emoji process also now updates a column to the `data_table.txt` file for sharing on readmes with `update_data.py` maintaining it in the data update process.

### üêû Bug Fixes

- The statements in translation files have been fixed as they were improperly defined after a file was moved.

### ‚ôªÔ∏è Code Refactoring

- The Jupyter notebooks for autosuggestions and emojis as well as `update_data.py` were moved to the `extract_transform` directory given that they're not used to load data anymore.
  - Their code was refactored to reflect their new locations.
- Massive amounts of refactoring happened to achieve the shift in the data export method:
  - `format_WORD_TYPE.py` files export to a `formatted_data` directory within `extract_transform`.
  - Copies of all data JSONs that were originally in Scribe apps are now in the `formatted_data` directories.
  - Functions in `update_utils.py` were switched given that data is no longer uploaded into a `Data` directory within the language keyboard directories within Scribe apps.
  - Lots of functions and variables were renamed to make them more understandable.
  - Code to derive appropriate export locations within `format_WORD_TYPE.py` files was removed in favor of a language `formatted_data` directory.
  - regex was added as a dependency.
  - pylint comments were removed.
- Verb SPARQL query scripts for Spanish and Italian were simplified to remove unneeded repeat conditions ([#7](https://github.com/scribe-org/Scribe-Data/issues/7)).

## Scribe-Data 2.2.2

### ‚ú® Features

- An option to remove the `is_base` and `rank` sub keys was added.

### ‚ôªÔ∏è Code Refactoring

- The export filenames for emoji keywords were renamed to reflect their usage in autosuggestions and soon autocompletions as well.

## Scribe-Data 2.2.1

### ‚ú® Features

- The number of suggested emojis for words can now be limited.
- The total number of emojis that suggestions can be made for can now be limited.

## Scribe-Data 2.2.0

### ‚ú® Features

- Scribe-Data now allows the user to create JSONs of word-emoji key-value pairs ([#24](https://github.com/scribe-org/Scribe-Data/issues/24)).

## Scribe-Data 2.1.0

### ‚ú® Features

- Scribe-Data can now split Wikidata queries into multiple stages to break up those that were too large to run ([#21](https://github.com/scribe-org/Scribe-Data/issues/21)).

## Scribe-Data 2.0.0

### ‚ú® Features

- Scribe-Data now has the ability to download Wikipedia dumps of any language ([#15](https://github.com/scribe-org/Scribe-Data/issues/15)).
- Functions have been added to parse and clean the above dumps ([#15](https://github.com/scribe-org/Scribe-Data/issues/15)).
- Autosuggestions are generated from the cleaned texts by deriving most common words and those words that most commonly follow them ([#15](https://github.com/scribe-org/Scribe-Data/issues/15)).
- A query for profane words has been added and integrated into the autosuggest flow to make sure that inappropriate words are not included ([#16](https://github.com/scribe-org/Scribe-Data/issues/16)).
  - The adjectives column has been removed from Scribe data tables until support is offered.

### ‚ôªÔ∏è Code Refactoring

- The error messages for incorrect args in update_data.py have been updated.

## Scribe-Data 1.0.1

### ‚ú® Features

- update_data.py now functions using SPARQLWrapper instead of wikidataintegrator.

### üêû Bug Fixes

- The data update process has been fixed to work for all queries.
- Hard coded strings for Spanish formatting files were fixed.
- The paths of update_data.py were changed to match the new package structure.

## Scribe-Data 1.0.0

### üöÄ Deployment

- Releasing a Python package so that codes are accessible and the structure is set for future project iterations.

### ‚ú® Features

- Data updates are done via a single file that loads new formatted data into each Scribe application.
- This will be expanded on in the future to create language packs that can be downloaded in app.

### üóÉÔ∏è Data

- Data extraction and formatting scripts for each of Scribe's current languages as well as those with significant data on Wikidata are included.

Languages include: French, German, Italian, Portuguese, Russian, Spanish, and Swedish.
Word types include: nouns, verbs, prepositions and translations.

### ‚ôªÔ∏è Code Refactoring

- The data update process now updates files in Android and Desktop directories if they're present.
